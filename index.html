<!DOCTYPE html>
<html>
<head>
    <title>按文件夾分類的 HTML 列表</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .folder {
            color: #586069;
            margin: 10px 0;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .folder-icon {
            margin-right: 5px;
        }
        .folder-content {
            padding-left: 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .folder-content ul {
            list-style: none;
            padding-left: 0;
        }
        a {
            color: #0366d6;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .open {
            max-height: 1000px; /* 足够大的高度以显示所有内容 */
        }
    </style>
</head>
<body>
    <h1>📂 文件夾分類列表</h1>

    <!-- 按文件夾分組 -->
    {% assign folders = "" | split: "," %}
    {% for file in site.static_files %}
        {% if file.extname == ".html" and file.path != "/index.html" %}
            <!-- 提取文件夾路徑 -->
            {% assign path_parts = file.path | split: "/" %}
            {% assign folder = path_parts[1] | default: "根目錄" %}
            {% unless folders contains folder %}
                {% assign folders = folders | push: folder %}
            {% endunless %}
        {% endif %}
    {% endfor %}

    <!-- 生成每個文件夾的列表 -->
    {% for folder in folders %}
        <div class="folder" onclick="toggleFolder(this)">
            <span class="folder-icon">📁</span>
            <span class="folder-name">{{ folder }}/</span>
        </div>
        <div class="folder-content">
            <ul>
                {% for file in site.static_files %}
                    {% if file.extname == ".html" and file.path != "/index.html" %}
                        {% assign path_parts = file.path | split: "/" %}
                        {% assign current_folder = path_parts[1] | default: "根目錄" %}
                        {% if current_folder == folder %}
                            <li>
                                → <a href="{{ file.path }}">{{ path_parts[-1] }}</a>
                            </li>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
    {% endfor %}

    <script>
        function toggleFolder(folderElement) {
            const folderContent = folderElement.nextElementSibling;
            const isOpen = folderContent.classList.contains('open');
            
            // 切换文件夹内容的显示状态
            folderContent.classList.toggle('open', !isOpen);
            
            // 更新文件夹图标
            const icon = folderElement.querySelector('.folder-icon');
            icon.textContent = isOpen ? '📁' : '📂';
        }
    </script>
</body>
</html>
